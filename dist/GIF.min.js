!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./src/GIFEncoder.js"),e=a("./src/GifReader.js");b.exports={Encoder:d,Decoder:e}},{"./src/GIFEncoder.js":2,"./src/GifReader.js":3}],2:[function(a,b,c){var d=a("./LZWEncoder"),e=a("./NeuQuant");GIFEncoder=function(){function a(){this.bin=[]}for(var b=0,c={};256>b;b++)c[b]=String.fromCharCode(b);a.prototype.getData=function(){for(var a="",b=this.bin.length,d=0;b>d;d++)a+=c[this.bin[d]];return a},a.prototype.writeByte=function(a){this.bin.push(a)},a.prototype.writeUTFBytes=function(a){for(var b=a.length,c=0;b>c;c++)this.writeByte(a.charCodeAt(c))},a.prototype.writeBytes=function(a,b,c){for(var d=c||a.length,e=b||0;d>e;e++)this.writeByte(a[e])};var f,g,h,i,j,k,l,m,n,o={},p=null,q=-1,r=0,s=!1,t=[],u=7,v=-1,w=!1,x=!0,y=!1,z=10,A="Generated by jsgif (https://github.com/antimatter15/jsgif/)",B=(o.setDelay=function(a){r=Math.round(a/10)},o.setDispose=function(a){a>=0&&(v=a)},o.setRepeat=function(a){a>=0&&(q=a)},o.setTransparent=function(a){p=a},o.setComment=function(a){A=a},o.addFrame=function(a,b){if(null===a||!s||null===i)throw new Error("Please call start method before calling addFrame");var c=!0;try{b?j=a:(j=a.getImageData(0,0,a.canvas.width,a.canvas.height).data,y||C(a.canvas.width,a.canvas.height)),F(),D(),x&&(J(),L(),q>=0&&K()),G(),""!==A&&H(),I(),x||L(),N(),x=!1}catch(d){c=!1}return c},o.finish=function(){if(!s)return!1;var a=!0;s=!1;try{i.writeByte(59)}catch(b){a=!1}return a},function(){h=0,j=null,k=null,l=null,n=null,w=!1,x=!0}),C=(o.setFrameRate=function(a){15!=a&&(r=Math.round(100/a))},o.setQuality=function(a){1>a&&(a=1),z=a},o.setSize=function(a,b){(!s||x)&&(f=a,g=b,1>f&&(f=320),1>g&&(g=240),y=!0)}),D=(o.start=function(){B();var b=!0;w=!1,i=new a;try{i.writeUTFBytes("GIF89a")}catch(c){b=!1}return s=b},o.cont=function(){B();var b=!0;return w=!1,i=new a,s=b},function(){var a=k.length,b=a/3;l=[];var c=new e(k,a,z);n=c.process();for(var d=0,f=0;b>f;f++){var g=c.map(255&k[d++],255&k[d++],255&k[d++]);t[g]=!0,l[f]=g}k=null,m=8,u=7,null!==p&&(h=E(p))}),E=function(a){if(null===n)return-1;for(var b=(16711680&a)>>16,c=(65280&a)>>8,d=255&a,e=0,f=16777216,g=n.length,h=0;g>h;){var i=b-(255&n[h++]),j=c-(255&n[h++]),k=d-(255&n[h]),l=i*i+j*j+k*k,m=h/3;t[m]&&f>l&&(f=l,e=m),h++}return e},F=function(){var a=f,b=g;k=[];for(var c=j,d=0,e=0;b>e;e++)for(var h=0;a>h;h++){var i=e*a*4+4*h;k[d++]=c[i],k[d++]=c[i+1],k[d++]=c[i+2]}},G=function(){i.writeByte(33),i.writeByte(249),i.writeByte(4);var a,b;null===p?(a=0,b=0):(a=1,b=2),v>=0&&(b=7&v),b<<=2,i.writeByte(0|b|0|a),M(r),i.writeByte(h),i.writeByte(0)},H=function(){i.writeByte(33),i.writeByte(254),i.writeByte(A.length),i.writeUTFBytes(A),i.writeByte(0)},I=function(){i.writeByte(44),M(0),M(0),M(f),M(g),x?i.writeByte(0):i.writeByte(128|u)},J=function(){M(f),M(g),i.writeByte(240|u),i.writeByte(0),i.writeByte(0)},K=function(){i.writeByte(33),i.writeByte(255),i.writeByte(11),i.writeUTFBytes("NETSCAPE2.0"),i.writeByte(3),i.writeByte(1),M(q),i.writeByte(0)},L=function(){i.writeBytes(n);for(var a=768-n.length,b=0;a>b;b++)i.writeByte(0)},M=function(a){i.writeByte(255&a),i.writeByte(a>>8&255)},N=function(){var a=new d(f,g,l,m);a.encode(i)};o.stream=function(){return i},o.setProperties=function(a,b){s=a,x=b};return o},b.exports=GIFEncoder},{"./LZWEncoder":4,"./NeuQuant":5}],3:[function(a,b,c){function d(a){var b=0;if(71!==a[b++]||73!==a[b++]||70!==a[b++]||56!==a[b++]||57!==a[b++]||97!==a[b++])throw"Invalid GIF 89a header.";var c=a[b++]|a[b++]<<8,d=a[b++]|a[b++]<<8,f=a[b++],g=f>>7,h=7&f,i=1<<h+1;a[b++];a[b++];var j=null;g&&(j=b,b+=3*i);var k=null,l=!0,m=[],n=0,o=null,p=0,k=null;for(this.width=c,this.height=d;l&&b<a.length;)switch(a[b++]){case 33:switch(a[b++]){case 255:if(11!==a[b]||78==a[b+1]&&69==a[b+2]&&84==a[b+3]&&83==a[b+4]&&67==a[b+5]&&65==a[b+6]&&80==a[b+7]&&69==a[b+8]&&50==a[b+9]&&46==a[b+10]&&48==a[b+11]&&3==a[b+12]&&1==a[b+13]&&0==a[b+16])b+=14,k=a[b++]|a[b++]<<8,b++;else for(b+=12;;){var q=a[b++];if(0===q)break;b+=q}break;case 249:if(4!==a[b++]||0!==a[b+4])throw"Invalid graphics extension block.";var r=a[b++];n=a[b++]|a[b++]<<8,o=a[b++],0===(1&r)&&(o=null),p=r>>2&7,b++;break;case 254:for(;;){var q=a[b++];if(0===q)break;b+=q}break;default:throw"Unknown graphic control label: 0x"+a[b-1].toString(16)}break;case 44:var s=a[b++]|a[b++]<<8,t=a[b++]|a[b++]<<8,u=a[b++]|a[b++]<<8,v=a[b++]|a[b++]<<8,w=a[b++],x=w>>7,y=w>>6&1,z=7&w,A=1<<z+1,B=j,C=!1;if(x){var C=!0;B=b,b+=3*A}var D=b;for(b++;;){var q=a[b++];if(0===q)break;b+=q}m.push({x:s,y:t,width:u,height:v,has_local_palette:C,palette_offset:B,data_offset:D,data_length:b-D,transparent_index:o,interlaced:!!y,delay:n,disposal:p});break;case 59:l=!1;break;default:throw"Unknown gif block: 0x"+a[b-1].toString(16)}this.numFrames=function(){return m.length},this.frameInfo=function(a){if(0>a||a>=m.length)throw"Frame index out of range.";return m[a]},this.decodeAndBlitFrameBGRA=function(b,d){var f=this.frameInfo(b),g=f.width*f.height,h=new Uint8Array(g);e(a,f.data_offset,h,g);var i=f.palette_offset,j=f.transparent_index;null===j&&(j=256);var k=f.width,l=c-k,m=k,n=4*(f.y*c+f.x),o=4*((f.y+f.height)*c+f.x),p=n,q=4*l;f.interlaced===!0&&(q+=4*(k+l)*7);for(var r=8,s=0,t=h.length;t>s;++s){var u=h[s];if(0===m&&(p+=q,m=k,p>=o&&(q=l+4*(k+l)*(r-1),p=n+(k+l)*(r<<1),r>>=1)),u===j)p+=4;else{var v=a[i+3*u],w=a[i+3*u+1],x=a[i+3*u+2];d[p++]=x,d[p++]=w,d[p++]=v,d[p++]=255}--m}},this.decodeAndBlitFrameRGBA=function(b,d){var f=this.frameInfo(b),g=f.width*f.height,h=new Uint8Array(g);e(a,f.data_offset,h,g);var i=f.palette_offset,j=f.transparent_index;null===j&&(j=256);var k=f.width,l=c-k,m=k,n=4*(f.y*c+f.x),o=4*((f.y+f.height)*c+f.x),p=n,q=4*l;f.interlaced===!0&&(q+=4*(k+l)*7);for(var r=8,s=0,t=h.length;t>s;++s){var u=h[s];if(0===m&&(p+=q,m=k,p>=o&&(q=l+4*(k+l)*(r-1),p=n+(k+l)*(r<<1),r>>=1)),u===j)p+=4;else{var v=a[i+3*u],w=a[i+3*u+1],x=a[i+3*u+2];d[p++]=v,d[p++]=w,d[p++]=x,d[p++]=255}--m}}}function e(a,b,c,d){for(var e=a[b++],f=1<<e,g=f+1,h=g+1,i=e+1,j=(1<<i)-1,k=0,l=0,m=0,n=a[b++],o=new Int32Array(4096),p=null;;){for(;16>k&&0!==n;)l|=a[b++]<<k,k+=8,1===n?n=a[b++]:--n;if(i>k)break;var q=l&j;if(l>>=i,k-=i,q!==f){if(q===g)break;for(var r=h>q?q:p,s=0,t=r;t>f;)t=o[t]>>8,++s;var u=t,v=m+s+(r!==q?1:0);if(v>d)return void console.log("Warning, gif stream longer than expected.");c[m++]=u,m+=s;var w=m;for(r!==q&&(c[m++]=u),t=r;s--;)t=o[t],c[--w]=255&t,t>>=8;null!==p&&4096>h&&(o[h++]=p<<8|u,h>=j+1&&12>i&&(++i,j=j<<1|1)),p=q}else h=g+1,i=e+1,j=(1<<i)-1,p=null}return m!==d&&console.log("Warning, gif stream shorter than expected."),c}b.exports=d},{}],4:[function(a,b,c){LZWEncoder=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m={},n=-1,o=12,p=5003,q=o,r=1<<o,s=[],t=[],u=p,v=0,w=!1,x=0,y=0,z=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],A=[],B=m.LZWEncoder=function(e,f,g,h){a=e,b=f,c=g,d=Math.max(2,h)},C=function(a,b){A[l++]=a,l>=254&&G(b)},D=function(a){E(u),v=j+2,w=!0,J(j,a)},E=function(a){for(var b=0;a>b;++b)s[b]=-1},F=m.compress=function(a,b){var c,d,e,f,m,o,p;for(i=a,w=!1,g=i,h=H(g),j=1<<a-1,k=j+1,v=j+2,l=0,f=I(),p=0,c=u;65536>c;c*=2)++p;p=8-p,o=u,E(o),J(j,b);a:for(;(e=I())!=n;)if(c=(e<<q)+f,d=e<<p^f,s[d]!=c){if(s[d]>=0){m=o-d,0===d&&(m=1);do if((d-=m)<0&&(d+=o),s[d]==c){f=t[d];continue a}while(s[d]>=0)}J(f,b),f=e,r>v?(t[d]=v++,s[d]=c):D(b)}else f=t[d];J(f,b),J(k,b)},G=(m.encode=function(c){c.writeByte(d),e=a*b,f=0,F(d+1,c),c.writeByte(0)},function(a){l>0&&(a.writeByte(l),a.writeBytes(A,0,l),l=0)}),H=function(a){return(1<<a)-1},I=function(){if(0===e)return n;--e;var a=c[f++];return 255&a},J=function(a,b){for(x&=z[y],y>0?x|=a<<y:x=a,y+=g;y>=8;)C(255&x,b),x>>=8,y-=8;if((v>h||w)&&(w?(h=H(g=i),w=!1):(++g,h=g==q?r:H(g))),a==k){for(;y>0;)C(255&x,b),x>>=8,y-=8;G(b)}};return B.apply(this,arguments),m},b.exports=LZWEncoder},{}],5:[function(a,b,c){NeuQuant=function(){var a,b,c,d,e,f={},g=256,h=499,i=491,j=487,k=503,l=3*k,m=g-1,n=4,o=100,p=16,q=1<<p,r=10,s=10,t=q>>s,u=q<<r-s,v=g>>3,w=6,x=1<<w,y=v*x,z=30,A=10,B=1<<A,C=8,D=1<<C,E=A+C,F=1<<E,G=[],H=[],I=[],J=[],K=f.NeuQuant=function(a,f,h){var i,j;for(b=a,c=f,d=h,e=new Array(g),i=0;g>i;i++)e[i]=new Array(4),j=e[i],j[0]=j[1]=j[2]=(i<<n+8)/g,I[i]=q/g,H[i]=0},L=function(){for(var a=[],b=new Array(g),c=0;g>c;c++)b[e[c][3]]=c;for(var d=0,f=0;g>f;f++){var h=b[f];a[d++]=e[h][0],a[d++]=e[h][1],a[d++]=e[h][2]}return a},M=function(){var a,b,c,d,f,h,i,j;for(i=0,j=0,a=0;g>a;a++){for(f=e[a],c=a,d=f[1],b=a+1;g>b;b++)h=e[b],h[1]<d&&(c=b,d=h[1]);if(h=e[c],a!=c&&(b=h[0],h[0]=f[0],f[0]=b,b=h[1],h[1]=f[1],f[1]=b,b=h[2],h[2]=f[2],f[2]=b,b=h[3],h[3]=f[3],f[3]=b),d!=i){for(G[i]=j+a>>1,b=i+1;d>b;b++)G[b]=a;i=d,j=a}}for(G[i]=j+m>>1,b=i+1;256>b;b++)G[b]=m},N=function(){var e,f,g,m,p,q,r,s,t,u,v,x,A,C;for(l>c&&(d=1),a=30+(d-1)/3,x=b,A=0,C=c,v=c/(3*d),u=v/o|0,s=B,q=y,r=q>>w,1>=r&&(r=0),e=0;r>e;e++)J[e]=s*((r*r-e*e)*D/(r*r));for(t=l>c?3:c%h!==0?3*h:c%i!==0?3*i:c%j!==0?3*j:3*k,e=0;v>e;)if(g=(255&x[A+0])<<n,m=(255&x[A+1])<<n,p=(255&x[A+2])<<n,f=R(g,m,p),Q(s,f,g,m,p),0!==r&&P(r,f,g,m,p),A+=t,A>=C&&(A-=c),e++,0===u&&(u=1),e%u===0)for(s-=s/a,q-=q/z,r=q>>w,1>=r&&(r=0),f=0;r>f;f++)J[f]=s*((r*r-f*f)*D/(r*r))},O=(f.map=function(a,b,c){var d,f,h,i,j,k,l;for(j=1e3,l=-1,d=G[b],f=d-1;g>d||f>=0;)g>d&&(k=e[d],h=k[1]-b,h>=j?d=g:(d++,0>h&&(h=-h),i=k[0]-a,0>i&&(i=-i),h+=i,j>h&&(i=k[2]-c,0>i&&(i=-i),h+=i,j>h&&(j=h,l=k[3])))),f>=0&&(k=e[f],h=b-k[1],h>=j?f=-1:(f--,0>h&&(h=-h),i=k[0]-a,0>i&&(i=-i),h+=i,j>h&&(i=k[2]-c,0>i&&(i=-i),h+=i,j>h&&(j=h,l=k[3]))));return l},f.process=function(){return N(),O(),M(),L()},function(){var a;for(a=0;g>a;a++)e[a][0]>>=n,e[a][1]>>=n,e[a][2]>>=n,e[a][3]=a}),P=function(a,b,c,d,f){var h,i,j,k,l,m,n;for(j=b-a,-1>j&&(j=-1),k=b+a,k>g&&(k=g),h=b+1,i=b-1,m=1;k>h||i>j;){if(l=J[m++],k>h){n=e[h++];try{n[0]-=l*(n[0]-c)/F,n[1]-=l*(n[1]-d)/F,n[2]-=l*(n[2]-f)/F}catch(o){}}if(i>j){n=e[i--];try{n[0]-=l*(n[0]-c)/F,n[1]-=l*(n[1]-d)/F,n[2]-=l*(n[2]-f)/F}catch(o){}}}},Q=function(a,b,c,d,f){var g=e[b];g[0]-=a*(g[0]-c)/B,g[1]-=a*(g[1]-d)/B,g[2]-=a*(g[2]-f)/B},R=function(a,b,c){var d,f,h,i,j,k,l,m,o,q;for(m=~(1<<31),o=m,k=-1,l=k,d=0;g>d;d++)q=e[d],f=q[0]-a,0>f&&(f=-f),h=q[1]-b,0>h&&(h=-h),f+=h,h=q[2]-c,0>h&&(h=-h),f+=h,m>f&&(m=f,k=d),i=f-(H[d]>>p-n),o>i&&(o=i,l=d),j=I[d]>>s,I[d]-=j,H[d]+=j<<r;return I[k]+=t,H[k]-=u,l};return K.apply(this,arguments),f},b.exports=NeuQuant},{}]},{},[1]);